<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>ABHFL_Complaint_type</fullName>
    <active>true</active>
    <errorConditionFormula>AND(
ISPICKVAL(Business_Unit__c, 'ABHFL'),
ISPICKVAL(Nature__c, 'Complaint'),
Owner:User.Assigned_Team__c <> 'Grievance Team',
ISPICKVAL(Stage__c, 'Open') || ISPICKVAL(Stage__c, 'In Progress'),
OR(
AND(
ISPICKVAL(Source__c, 'Branch'),
NOT(CONTAINS(TEXT(ABHFL_Case_Detail__r.Complaint_Type__c), 'Branch Walkin'))
) ||AND(NOT(TEXT(ABHFL_Case_Detail__r.Complaint_Type__c) = ''), ISNEW()),
AND(
ISPICKVAL(Source__c, 'Call Center'),
NOT(CONTAINS(TEXT(ABHFL_Case_Detail__r.Complaint_Type__c), 'Phone Inbound'))
) || AND(NOT(TEXT(ABHFL_Case_Detail__r.Complaint_Type__c) = ''), ISNEW() )
)
)</errorConditionFormula>
    <errorMessage>Only Grievance members can change complaint type.
Branch Users please select &apos;Branch Walkin&apos;, Call Center Users please select &apos;Phone Inbound&apos;.</errorMessage>
</ValidationRule>
