<!--
  @description       : 
  @author            : ChangeMeIn@UserSettingsUnder.SFDoc
  @group             : 
  @last modified on  : 02-27-2025
  @last modified by  : ChangeMeIn@UserSettingsUnder.SFDoc
-->
<template>
    <section role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="modal-heading-01"
        class="slds-modal slds-fade-in-open">
        <div class="slds-modal__container">
            <div class="slds-modal__header">
                <h1 class="slds-modal__title slds-hyphenate">
                    Get Account Holdings
                </h1>
            </div>
            <div class="slds-modal__content slds-p-around_medium">
                <div class="slds-p-around_medium">
                    <lightning-combobox 
                        label="Select Function"
                        placeholder="Select an option"
                        value={selectedFunction}
                        options={functionsOptions}
                        onchange={handleFunctionChange}
                        class="slds-size_1-of-1"
                        disabled={disableInput}>
                    </lightning-combobox>
                </div>
                
                <template if:true={isLoading}>
                    <div class="slds-backdrop" role="presentation"></div>
        
                    <div class="slds-fade-in-open  slds-modal_small">
                        <lightning-spinner alternative-text="Loading" size="large"></lightning-spinner>
                    </div>
                </template>
                <template if:true={accountData}>
                    <div class="slds-p-around_medium" style="max-height: 250px; overflow-y: auto;">
                        <lightning-datatable
                            key-field="id"
                            data={accountData}
                            columns={columns}
                            max-row-selection="1"
                            onrowselection={handleRowSelection}
                            >
                        </lightning-datatable>
                    </div>
                </template>
                <template if:true={showManualInput}>
                    <div class="slds-p-around_medium">
                        <lightning-input 
                            label="Account Holding #"
                            value={holdingNumber}
                            onchange={handleInputChange}
                            class="slds-m-bottom_medium"
                            disabled={disableAccountHolding}>
                        </lightning-input>
                    </div>
                    </template>
                
                <!-- Error Messages -->
                <template if:true={apifetchError}>
                        <div class="slds-text-color_error slds-p-around_medium">{apiFetchErroText}</div>
                </template>

                <template if:true={prospectError}>
                    <div class="slds-text-color_error slds-p-around_medium">{prospectErrorText}</div>
            </template>
                
                <template if:true={showFetchResponse}>
                         <!-- Placeholder for Fetch Response -->
                </template>
                <template if:true={showErrorMsg}>
                    <div class="slds-p-around_medium">
                        <p>{errorMessage}</p>
                    </div>
                </template>
            </div>
            <footer class="slds-grid slds-modal__footer slds-grid_align-center">
                <button class="slds-button slds-button_neutral" onclick={closeParentPopup}
                    title="Cancel">Cancel</button>
                <template if:false={dontShowGetholdings}>
                    <button class="slds-button slds-button_neutral" onclick={handleFetchDetails}
                        title="Get Account Holdings" disabled={disableInput}>Get Account Holdings</button>
                </template>
                <template if:true={showAcceptBtn}>
                    <button class="slds-button slds-button_neutral" onclick={handleUpdateFromFieldPopUp}
                        title="Accept">Accept</button>
                </template>
            </footer>
        </div>
    </section>
</template>