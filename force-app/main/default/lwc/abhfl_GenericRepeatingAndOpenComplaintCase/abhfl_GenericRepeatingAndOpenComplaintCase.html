<template>
    <lightning-card variant="narrow">
        <template if:true={isLoaded}>
            <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
        </template>
        <h2 slot="title">Indicator</h2>
        <div>
            <div class="slds-form slds-m-left_x-small" role="list">
                <div class="slds-form__row">
                    <div class="slds-form__item" role="listitem">
                        <div data-id="Repeated_Indicator_div"
                            class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-form-element_stacked slds-hint-parent slds-form-element_1-col">
                            <span class="slds-form-element__label">Repeated</span>
                            <div class="slds-form-element__control">
                                <div class="slds-form-element__static slds-text-longform">
                                    <lightning-icon class="" data-id="Repeated_Indicator" icon-name="utility:priority"
                                        variant="" size="small">
                                    </lightning-icon>
                                    <br />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!----  //commenting below lines as per PR970457-1405
            <div class="slds-form slds-m-top_xx-small slds-m-left_x-small" role="list">
                <div class="slds-form__row">
                    <div class="slds-form__item" role="listitem">
                        <div data-id="Open_Complaint_Indicator_div"
                            class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-form-element_stacked slds-hint-parent slds-form-element_1-col">
                            <span class="slds-form-element__label">Open Complaint</span>
                            <div class="slds-form-element__control">
                                <div class="slds-form-element__static slds-text-longform">
                                    <lightning-icon data-id="Open_Complaint_Indicator" icon-name="utility:priority"
                                        variant="" size="small">
                                    </lightning-icon>
                                    <br />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->
        </div>
        <div slot="actions">
            <lightning-icon icon-name="utility:refresh" alternative-text="Refresh" title="Refresh" size="x-small"
                onclick={getCaseRecordCommon}></lightning-icon>
        </div>
        <br />
        <template if:true={isAccount}>
            <template if:true={isAbhfl}>
                <div class="slds-grid slds-wrap" style="padding-inline: 10px;">
                    <div class="slds-col slds-size_1-of-4 custom-box">
                        <h2>NPS</h2>
                        <p class="text-8xl">{showCustomerNPSbyNumber}</p>
                    </div>
                    <div class="slds-col slds-size_1-of-4 custom-box">
                        <h2>Open Cases</h2>
                        <p class="text-6xl">{showOpenCase}</p>
                    </div>
                    <div class="slds-col slds-size_1-of-4 custom-box">
                        <h2>Open Complaints</h2>
                        <p class="text-6xl">{showOpenComplaintCase}</p>
                    </div>
                    <div class="slds-col slds-size_1-of-4 custom-box">
                        <h2>Open Escalated Cases </h2>
                        <p class="text-5xl">{showEscalatedCases}</p>
                    </div>
                </div>
            </template>
            <template if:false={isAbhfl}>
                <div class="slds-grid slds-wrap" style="padding-inline: 10px;">
                    <div class="slds-col slds-size_1-of-3 custom-box">
                        <h2>NPS</h2>
                        <p class="text-8xl">{showCustomerNPSbyNumber}</p>
                    </div>
                    <div class="slds-col slds-size_1-of-3 custom-box">
                        <h2>Open Cases</h2>
                        <p class="text-6xl">{showOpenCase}</p>
                    </div>
                    <div class="slds-col slds-size_1-of-3 custom-box">
                        <h2>Open Complaints</h2>
                        <p class="text-6xl">{showOpenComplaintCase}</p>
                    </div>
                </div>
            </template>
        </template>
        <!-- Added By Yogesh EY(ABCL) start[PR970457-2195]-->
        <template if:true={showdetailsbuttonhide}>
            <div class="buttonview">
                <lightning-button label="Show Details" onclick={handleClick} variant="brand"
                   ></lightning-button>
            </div>
        </template>
        <!-- Added By Yogesh EY(ABCL) ends[PR970457-2195]-->
    </lightning-card>
    <!-- Added By Yogesh EY(ABCL) start[PR970457-2195]-->
    <template if:true={isLoading}>
        <section role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="modal-heading-01"
            class="slds-modal slds-fade-in-open custom-modal">
            <lightning-spinner variant="brand" alternative-text="Loading" size="large"></lightning-spinner>
        </section>
        <div class="slds-backdrop" role="presentation"></div>
    </template>
    <template if:true={isrespdataaval}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
            aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open custom-modal-size">
            <div class="slds-modal__container custom-modal-size">
                <div class="slds-modal__header custom-modal-size">
                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                        title="Close" onclick={closeresp}>
                        <lightning-icon icon-name="utility:close" alternative-text="close" size="x-small">
                        </lightning-icon>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-text-heading_medium">Survey Response</h2>
                </div>
                <div class="slds-modal__content custom-modal-size">
                    <template if:true={surveyresponse}>
                        <div class="slds-grid slds-grid_vertical-align-start slds-wrap">
                            <!-- First table (side by side) -->
                            <div class="slds-col slds-size_1-of-2 slds-p-around_medium">
                                <h3 class="slds-text-heading_medium">Onboarding</h3>
                                <lightning-datatable data={surveyresponse} columns={columns} key-field="Id"
                                    default-sort-direction="desc" hide-checkbox-column>
                                </lightning-datatable>
                            </div>

                            <!-- Second table (side by side) -->
                            <div class="slds-col slds-size_1-of-2 slds-p-around_medium">
                                <h3 class="slds-text-heading_medium">Service</h3>
                                <lightning-datatable data={surveyresponse1} columns={columns1} key-field="Id"
                                    default-sort-direction="desc" hide-checkbox-column>
                                </lightning-datatable>
                            </div>
                        </div>

                        <!-- Third table (below the two side by side) -->
                        <div class="slds-col slds-size_1-of-2 slds-p-around_medium">
                            <h3 class="slds-text-heading_medium">Foreclosure</h3>
                            <lightning-datatable data={surveyresponse2} columns={columns2} key-field="Id"
                                default-sort-direction="desc" hide-checkbox-column>
                            </lightning-datatable>
                        </div>
                    </template>
                    <template if:true={error}>
                        <div class="slds-notify slds-notify_alert slds-alert_error">
                            <div class="slds-var-p-horizontal_small">{errorMessage}</div>
                        </div>
                    </template>
                </div>
                <div class="slds-modal__footer custom-modal-size">
                    <lightning-button label="Close" onclick={closeresp}></lightning-button>
                </div>
            </div>
        </section>
    </template>
    <!-- Added By Yogesh EY(ABCL) ends[PR970457-2195]-->
</template>