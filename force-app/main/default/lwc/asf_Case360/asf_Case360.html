<!--
  @description       : 
  @author            : ChangeMeIn@UserSettingsUnder.SFDoc
  @group             : 
  @last modified on  : 10-19-2024
  @last modified by  : rsinghnagar@salesforce.com
-->
<template>
  <div class="slds-box">
      <!-- FULL PAGE SPINNER -->
      <template if:true={loading}>
          <section role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="modal-heading-01"
              class="slds-modal slds-fade-in-open slds-modal_large bring-to-front">
              <lightning-spinner variant="brand" alternative-text="Loading" size="large"></lightning-spinner>
          </section>
          <div class="slds-backdrop" role="presentation"></div>
      </template>
      <template lwc:if={loadReady}>
          <lightning-card variant="Narrow" class="">

              <!-- <template if:false={showSpinner}> -->
              <template if:false={tempHide}>
                  <div class="page-section page-header slds-var-m-around_medium" align="center">
                      <template if:true={stagesData}>
                          <lightning-progress-indicator current-step={currentStep} type="path" variant="base">
                              <template for:each={stagesData} for:item="stage">
                                  <lightning-progress-step label={stage.Stage_Name__c} value={stage.Stage_Name__c}
                                      key={stage.Id}></lightning-progress-step>
                              </template>
                          </lightning-progress-indicator>
                      </template>
                  </div>
              </template>

              <!-- READ ONLY CORE FORMS -->
              <template if:false={openEditMode}>
                  <lightning-record-edit-form object-api-name="Case" record-id={recordId} data-id="caseROForm"
                      onload={handleCaseRecordLoadReadOnly} density="compact">
                      <lightning-layout horizontal-align="space" multiple-rows>
                          <template if:true={caseFieldsMetadata}>
                              <template for:each={caseFieldsMetadata} for:item="ccfield">
                                  <template if:true={ccfield.isCase}>
                                      <lightning-layout-item key={ccfield.Id} size={ccfield.layoutItemSize}
                                          padding="around-small">
                                          <template if:true={isCurrentUserOwner}>
                                              <lightning-output-field field-name={ccfield.FieldAPINAme}
                                                  class={ccfield.classString}>
                                              </lightning-output-field>
                                          </template>
                                          <template if:false={isCurrentUserOwner}>
                                              <template if:false={ccfield.isSensitive}>
                                                  <lightning-output-field class={ccfield.classString}
                                                      field-name={ccfield.FieldAPINAme}></lightning-output-field>
                                              </template>
                                              <template if:true={ccfield.isSensitive}>
                                                  <div class={ccfield.classString}>
                                                      <span
                                                          class="slds-form-element__label">{ccfield.FieldLabelName}</span>
                                                      <div class="slds-form-element__control">
                                                          <lightning-formatted-text value="XXXXXXX"
                                                              class="slds-form-element__static">XXXXXXX</lightning-formatted-text>
                                                      </div>
                                                  </div>
                                              </template>
                                          </template>
                                      </lightning-layout-item>
                                  </template>
                              </template>
                          </template>
                      </lightning-layout>
                  </lightning-record-edit-form>

                  <template if:true={caseExtensionRecordId}>
                      <lightning-record-edit-form object-api-name={caseRelObjName} record-id={caseExtensionRecordId}
                          data-id="caseRelObjROForm" onload={handleRecordLoadReadOnly} density="compact">
                          <lightning-layout horizontal-align="space" multiple-rows>
                              <template if:true={caseFieldsMetadata}>
                                  <template for:each={caseFieldsMetadata} for:item="ccfield">
                                      <template if:false={ccfield.isCase}>
                                          <lightning-layout-item key={ccfield.Id} size={ccfield.layoutItemSize}
                                              padding="around-small" class="slds-form__item slds-no-space">
                                              <template if:true={isCurrentUserOwner}>
                                                  <lightning-output-field class={ccfield.classString}
                                                      field-name={ccfield.FieldAPINAme}></lightning-output-field>
                                              </template>
                                              <template if:false={isCurrentUserOwner}>
                                                  <template if:false={ccfield.isSensitive}>
                                                      <lightning-output-field class={ccfield.classString}
                                                          field-name={ccfield.FieldAPINAme}></lightning-output-field>
                                                  </template>
                                                  <template if:true={ccfield.isSensitive}>
                                                      <div class={ccfield.classString}>
                                                          <span
                                                              class="slds-form-element__label">{ccfield.FieldLabelName}</span>
                                                          <div class="slds-form-element__control">
                                                              <lightning-formatted-text value="XXXXXXX"
                                                                  class="slds-form-element__static">XXXXXXX
                                                              </lightning-formatted-text>
                                                          </div>
                                                      </div>
                                                  </template>
                                              </template>
                                          </lightning-layout-item>
                                      </template>
                                  </template>
                              </template>
                          </lightning-layout>
                      </lightning-record-edit-form>
                  </template>

                  <!-- EDIT DETAILS BUTTON-->
                  <template if:true={showEditDetailsButton}>
                      <div class="slds-m-around_medium">
                          <lightning-button label="Edit Details" title="Non-primary action" onclick={handleClick}
                              class="slds-m-left_x-small slds-align_absolute-center custom-footer"></lightning-button>
                      </div>
                  </template>
              </template>



              <!-- EDITABLE CORE FORMS -->
              <template if:true={openEditMode}>
                  <!-- CASE CORE FORM -->
                  <lightning-record-edit-form object-api-name="Case" record-id={recordId} onsubmit={handleSubmit2}
                      data-id="caseEditForm" onload={handleCaseRecordLoad} density="compact">
                      <!-- Virendra : 6th March 2023 : Added onload event for handling rendering of all the field correctly.-->
                      <!--<lightning-layout horizontal-align="space" multiple-rows>-->
                      <div class="slds-grid slds-wrap">
                          <template if:true={caseFieldsMetadata}>
                              <template for:each={caseFieldsMetadata} for:item="ccfield">
                                  <template if:true={ccfield.isCase}>
                                      <!--<lightning-layout-item key={ccfield.Id} size={ccfield.layoutItemSize}
                                              padding="around-small" class="slds-form__item slds-no-space">-->
                                      <div key={ccfield.Id} class={ccfield.divEditClass}>
                                          <template if:true={ccfield.bSearchablePicklist}>
                                              <!--bSearchablePicklist : true : show searchable picklist with multiselect value as false-->
                                              <!--Important : for searchable picklist framework, it is important to show lightning-input-field with slds-hide class. Do not ignore this.-->
                                              <lightning-input-field id={ccfield.FieldAPINAme}
                                                  field-name={ccfield.FieldAPINAme} class="slds-hide custom-hidden"
                                                  onchange={handleHiddenFieldChange}> </lightning-input-field>
                                              <c-asf_searchable-picklist multiselect=false objectname="Case"
                                                  fieldname={ccfield.FieldAPINAme} fieldlabel={ccfield.FieldLabelName}
                                                  object-record-id={recordId}
                                                  onsetfieldvalueevt={handleSetFieldValue}
                                                  max-multi-select-allowed={ccfield.maxValuesAllowed}>
                                              </c-asf_searchable-picklist>
                                          </template>
                                          <template if:true={ccfield.bMultiSelectSearchablePicklist}>
                                              <!--bSearchablePicklist : true : show searchable picklist with multiselect value as true-->
                                              <!--Important : for Multi-Select searchable picklist framework, it is important to show lightning-input-field with slds-hide class. Do not ignore this.-->
                                              <lightning-input-field id={ccfield.FieldAPINAme}
                                                  field-name={ccfield.FieldAPINAme} class="slds-hide custom-hidden"
                                                  onchange={handleHiddenFieldChange}> </lightning-input-field>
                                              <c-asf_searchable-picklist multiselect=true objectname="Case"
                                                  fieldname={ccfield.FieldAPINAme} fieldlabel={ccfield.FieldLabelName}
                                                  object-record-id={recordId}
                                                  onsetfieldvalueevt={handleSetFieldValue}
                                                  max-multi-select-allowed={ccfield.maxValuesAllowed}>
                                              </c-asf_searchable-picklist>
                                          </template>
                                          <template if:false={ccfield.bSearchablePicklist}>
                                              <template if:false={ccfield.bMultiSelectSearchablePicklist}>
                                                  <template if:false={ccfield.bShowAsCustomLink}>
                                                      <lightning-input-field field-name={ccfield.FieldAPINAme}
                                                          value={ccfield.value} onchange={handleChange}
                                                          class={ccfield.editClassString} disabled={ccfield.ReadOnly}
                                                          required={ccfield.Required}>
                                                      </lightning-input-field>
                                                  </template>
                                                  <template if:true={ccfield.bShowAsCustomLink}>
                                                      <lightning-output-field
                                                          field-name={ccfield.FieldAPINAme}></lightning-output-field>
                                                  </template>

                                              </template>
                                          </template>
                                      </div>


                                      <!--</lightning-layout-item>-->
                                  </template>
                              </template>
                          </template>
                      </div>
                      <!-- HIDDEN BUTTON TO SUBMIT THE FORM FROM BUTTON PANEL-->
                      <!-- Damn! Stupid record-edit-form doesnt let you submit form and auto invoke onsubmit method from outside the form buttons. -->
                      <template if:false={caseExtensionRecordId}>
                          <lightning-button variant="brand" type="submit"
                              class="slds-m-around_xxx-small hiddenSubmitBtn" label="Hidden">
                          </lightning-button>
                      </template>
                      <!--</lightning-layout>-->
                  </lightning-record-edit-form>

                  <!--CASE EXTN CORE FORM-->
                  <template if:true={caseExtensionRecordId}>
                      <lightning-record-edit-form object-api-name={caseRelObjName} record-id={caseExtensionRecordId}
                          onsubmit={handleSubmitRelatedObject2} onload={handleRecordLoad}
                          data-id="caseRelObjEditForm" density="compact">
                          <!--<lightning-layout horizontal-align="space" multiple-rows>-->
                          <div class="slds-grid slds-wrap">
                              <template if:true={caseFieldsMetadata}>
                                  <template for:each={caseFieldsMetadata} for:item="ccfield">
                                      <template if:false={ccfield.isCase}>
                                          <!--<lightning-layout-item key={ccfield.Id} size={ccfield.layoutItemSize}
                                                  padding="around-small" class="slds-form__item slds-no-space">-->
                                          <div key={ccfield.Id} class={ccfield.divEditClass}>
                                              <!-- <span class="slds-badge">{ccfield.DisplayOrder}</span> -->
                                              <template if:true={ccfield.bSearchablePicklist}>
                                                  <!--bSearchablePicklist : true : show searchable picklist with multiselect value as false-->
                                                  <!--Important : for searchable picklist framework, it is important to show lightning-input-field with slds-hide class. Do not ignore this.-->
                                                  <lightning-input-field id={ccfield.FieldAPINAme}
                                                      field-name={ccfield.FieldAPINAme} class="slds-hide custom-hidden"
                                                      onchange={handleHiddenFieldChange} data-hiddenpicklist="true">
                                                  </lightning-input-field>
                                                  <c-asf_searchable-picklist multiselect=false
                                                      objectname={caseRelObjName} fieldname={ccfield.FieldAPINAme}
                                                      fieldlabel={ccfield.FieldLabelName} object-record-id={recordId}
                                                      onsetfieldvalueevt={handleSetFieldValue}
                                                      max-multi-select-allowed={ccfield.maxValuesAllowed}>
                                                  </c-asf_searchable-picklist>
                                              </template>
                                              <template if:true={ccfield.bMultiSelectSearchablePicklist}>
                                                  <!--bSearchablePicklist : true : show searchable picklist with multiselect value as true-->
                                                  <!--Important : for Multi-Select searchable picklist framework, it is important to show lightning-input-field with slds-hide class. Do not ignore this.-->
                                                  <lightning-input-field id={ccfield.FieldAPINAme}
                                                      field-name={ccfield.FieldAPINAme} class="slds-hide custom-hidden" 
                                                      onchange={handleHiddenFieldChange} data-hiddenpicklist="true">
                                                  </lightning-input-field>
                                                  <c-asf_searchable-picklist multiselect=true
                                                      objectname={caseRelObjName} fieldname={ccfield.FieldAPINAme}
                                                      fieldlabel={ccfield.FieldLabelName} object-record-id={recordId}
                                                      onsetfieldvalueevt={handleSetFieldValue}
                                                      required="false"
                                                      max-multi-select-allowed={ccfield.maxValuesAllowed}></c-asf_searchable-picklist>
                                              </template>
                                              <template if:false={ccfield.bSearchablePicklist}>
                                                  <template if:false={ccfield.bMultiSelectSearchablePicklist}>

                                                      <template if:true={ccfield.bConfirmationRequired}>
                                                          <div style="position:relative">
                                                              <lightning-input-field field-name={ccfield.FieldAPINAme}
                                                                  value={ccfield.value} onkeydown={handlePreventInput}
                                                                  data-field-name={ccfield.FieldAPINAme}
                                                                  data-field-lwc-name = {ccfield.confirmationLWCName}
                                                                  required={ccfield.Required} autocomplete="off">
                                                              </lightning-input-field><!--class={ccfield.editClassString}-->
                                                              <lightning-button-icon icon-name="utility:success"
                                                                  alternative-text="verify" title="verify"
                                                                  data-field-name={ccfield.FieldAPINAme}
                                                                  data-field-lwc-name = {ccfield.confirmationLWCName}
                                                                  style="position: absolute; right: 0%; top: 1%; z-index: 10;"
                                                                  onclick={handleVerifyField}></lightning-button-icon>

                                                              <!-- CONFIRM FIELD POPUPs-->
                                                              <template lwc:if={openConfirmFieldPopup}>
                                                                  <!-- THE CODE FOR FIELD EXTENSION LWC GOES HERE. -->
                                                                  <lwc:component lwc:is={componentConstructor} onclosepopup={cancelConfirmFieldPopup}
                                                                              record-id={recordId} field-name-to-search = {fieldNameToSearch} oncase360fieldextn={handleCase360FieldExtn}></lwc:component>
                                                                              <div class="slds-backdrop slds-backdrop_open"
                                                                              role="presentation"></div>
                                                              </template>

                                                              <!-- CONFIRM FIELD POP UP CLOSES HERE-->

                                                          </div>
                                                      </template>
                                                      <template if:false={ccfield.bConfirmationRequired}>
                                                          <lightning-input-field field-name={ccfield.FieldAPINAme}
                                                              value={ccfield.value} onchange={handleChange}
                                                              disabled={ccfield.ReadOnly}
                                                              class={ccfield.editClassString}
                                                              required={ccfield.Required}>
                                                          </lightning-input-field>
                                                      </template>
                                                  </template>
                                              </template>
                                          </div>
                                          <!--</lightning-layout-item>-->
                                      </template>
                                  </template>
                              </template>
                          </div>

                          <!--</lightning-layout>-->

                          <!-- HIDDEN BUTTON TO SUBMIT THE FORM FROM BUTTON PANEL-->
                          <!-- Damn! Stupid record-edit-form doesnt let you submit form and auto invoke onsubmit method from outside the form buttons. -->
                          <lightning-button variant="brand" type="submit"
                              class="slds-m-around_xxx-small hiddenSubmitBtn" label="Hidden">
                          </lightning-button>

                          <!-- Virendra : 6th March 2023: Show information to User why Form is Read only.style="padding:0.5rem;background:#16325c"-->
                          <div class="slds-m-around_medium" if:true={showWhyRecordReadOnlyInfo}><lightning-icon
                                  icon-name="utility:info" size="small" variant="warning"></lightning-icon><span>
                                  Edits to
                                  record at this stage is prohibited as Approval Request is either submitted or
                                  already
                                  approved.</span>
                          </div>
                      </lightning-record-edit-form>
                  </template>

                  <!-- Case Closure POP UP -->
                  <template lwc:if={openClosurePopUp}>
                      <section role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="modal-heading-01"
                          class="slds-modal slds-fade-in-open">
                          <div class="slds-modal__container">
                              <div class="slds-modal__header">
                                  <h1 class="slds-modal__title slds-hyphenate">Case Closure</h1>
                              </div>
                              <template if:true={showErrors}>
                                  <div class="slds-notify slds-notify_alert slds-alert_error">
                                      <div class="slds-var-p-horizontal_small">{errorMessage}</div>
                                  </div>
                              </template>
                              <div class="slds-modal__content slds-p-around_medium">
                                  <lightning-radio-group name="closureType" label="Closure Type"
                                      options={closureTypeOptions} value={closureTypeSelected} type="button"
                                      onchange={handleClosureTypeChange}></lightning-radio-group>
                                  <!-- VIRENDRA - ADDED CHECK FOR BU SPECIFIC VISIBILITY OF FIELDS.-->
                                  <!-- NEERAJ - MADE THE REQUIRED ATTRIBUTE DYNAMIC TO MAKE IT NON-REQUIRED || PR1030924-43-->
                                  <template lwc:if={eligibleForBU}>
                                      <template lwc:if={showRejectPanel}>
                                          <lightning-textarea name="rejectedReason" class="ReasonInput validate" required={optionalResComment}
                                              label="Close Unresolved Details" variant="label-stacked"
                                              value={rejectedReason} onchange={setRejectedReason}
                                              placeholder="type here..."></lightning-textarea>
                                          <lightning-combobox
                                              class="ReasonInput slds-m-left_xx-small slds-m-right_xx-small"
                                              value={selectedReason} label="Close Unresolved Reason" options={reasonLOV}
                                              placeholder='Close Unresolved Reason' onchange={handleRejReasonChange}
                                              required>
                                          </lightning-combobox>
                                      </template>
                                      <template lwc:else>
                                          
                      <!-- ZAHED - ADDED BELOW COMBOBOX FOR RESOLVED REASON - Start-->
                      <lightning-textarea
                      name="resolutionCommentPopupFld"
                      class="resolve-input ReasonInput validate"
                      required
                      label="Resolution Remarks"
                      variant="label-stacked"
                      value={resolutionReasonPopUpFld}
                      onchange={handleResolnCommntChng}
                      placeholder="type here..."
                    ></lightning-textarea>
                    <template if:false={isLoading}>
                      <template lwc:if={showResolvedReasons}>
                        <lightning-combobox
                          data-id="resolveReason"
                          class="resolve-combobox slds-m-left_xx-small slds-m-right_xx-small validate"
                          value={resolutionReason}
                          label="Close Resolved Reason"
                          options={resolveReasonLOV}
                          placeholder="Close Resolved Reason"
                          onchange={handleRejReasonChange}
                          required
                        >
                        </lightning-combobox>
                      </template>
                    </template>
                    <!-- ZAHED - ADDED  COMBOBOX FOR RESOLVED REASON - End-->
                                      </template>
                                  </template>
                                  
                              </div>
                              <div class="slds-modal__footer">
                                  <lightning-button class="slds-m-around_small" label="Cancel"
                                      onclick={cancelClose}></lightning-button>
                                  <lightning-button class="slds-m-around_small" label="Save" disabled={notApplicable}
                                      onclick={closeTheCase}></lightning-button>
                              </div>
                          </div>
                      </section>
                      <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                  </template>

                  <!-- MOVE BACK STAGE POP UP-->
                  <template if:true={showPreviousStages}>
                      <section role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="modal-heading-01"
                          class="slds-modal slds-fade-in-open">
                          <div class="slds-modal__container">
                              <div class="slds-modal__header">
                                  <h1 class="slds-modal__title slds-hyphenate">Move to Back Stage</h1>
                              </div>
                              <div class="slds-modal__content slds-p-around_medium">
                                  <lightning-combobox name="stage" label="Stage" value={selectedStage}
                                      placeholder="Select Previous Stage" options={caseStages}
                                      onchange={handleStageChange} required></lightning-combobox>
                              </div>
                              <div class="slds-modal__footer">
                                  <lightning-button class="slds-m-around_small" label="Cancel"
                                      onclick={cancelBackCaseStage}></lightning-button>
                                  <lightning-button class="slds-m-around_small" label="Save"
                                      onclick={saveBackCaseStage} disabled={disableBackSave}></lightning-button>
                              </div>
                          </div>
                      </section>
                      <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                  </template>

                  <!-- MOVE FORWARD STAGE POP UP-->
                  <template if:true={showForwardStages}>
                      <section role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="modal-heading-01"
                          class="slds-modal slds-fade-in-open">
                          <div class="slds-modal__container">
                              <div class="slds-modal__header">
                                  <h1 class="slds-modal__title slds-hyphenate">Move to Forward Stage</h1>
                              </div>
                              <div class="slds-modal__content slds-p-around_medium">
                                  <lightning-combobox name="manualstage" label="Manual Stages"
                                      value={selectedManualStage} placeholder="Select a Manual Stage"
                                      options={caseManualStages}
                                      onchange={handleManualStageChange}></lightning-combobox>
                              </div>
                              <div class="slds-modal__footer">
                                  <lightning-button class="slds-m-around_small" label="Cancel"
                                      onclick={cancelForwardCaseStage}></lightning-button>
                                  <lightning-button class="slds-m-around_small" label="Save"
                                      onclick={saveManualCaseStage} disabled={disableSkipSave}></lightning-button>
                              </div>
                          </div>
                      </section>
                      <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                  </template>
              </template>

              <!-- BUTTONS -->
              <template if:true={openEditMode}>
                  <div class="slds-align_absolute-center custom-footer">
                      <lightning-button-group>
                          <template lwc:if={displayBackButton}>
                              <!--Virendra : 6th March 2023 : Commented below line and added above.-->
                              <lightning-button label="Back" icon-name="utility:back" class="slds-m-around_xxx-small"
                                  onclick={handleBackButtonClick} disabled={backButtonDisabled}></lightning-button>
                          </template>
                          <template lwc:if={showSaveButton}>
                              <!-- Adding Save button - Santanu 31 Oct 2023 -->
                              <lightning-button label="Save" icon-name="utility:save" class="slds-m-around_xxx-small"
                                  onclick={saveCaseAndExtn} variant="brand"></lightning-button>
                          </template>
                          <template lwc:if={showMoveToNextButton}>
                              <lightning-button variant="brand" icon-name="utility:breadcrumbs"
                                  class="slds-m-around_xxx-small" onclick={handleMoveToNext}
                                  label="Move to Next Stage">
                              </lightning-button>
                          </template>
                          <template lwc:if={showForwardToStageButton}>
                              <lightning-button variant="brand" icon-name="utility:forward"
                                  class="slds-m-around_xxx-small" onclick={handleForwardStageMove}
                                  label="Skip to Stage">
                              </lightning-button>
                          </template>
                          <template if:true={boolSaveReassignButton}>
                              <lightning-button type="submit" name="savereassign" label="Save & Reassign"
                                  onclick={handleSaveReassign}>
                              </lightning-button>
                          </template>
                          <template if:true={displayCloseButton}>
                              <!--Virendra: 6th March 2023: Commented below line and added above-->
                              <lightning-button label="Close Case" icon-name="utility:ban"
                                  class="slds-m-around_xxx-small" onclick={handleClose}></lightning-button>
                          </template>
                          <template lwc:if={showCancelButton}>
                              <lightning-button label="Cancel" title="Non-primary action2"
                                  class="slds-m-around_xxx-small" icon-name="utility:close"
                                  onclick={handleEditCancel}></lightning-button>
                          </template>
                      </lightning-button-group>
                  </div>
              </template>
          </lightning-card>
      </template>
  </div>
  <!--Start: Complain SR Rejection Create Modal-->
  <template if:true={showRejModal}>
      <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
          aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open slds-modal_small">
          <div class="slds-modal__container">
              <!-- modal header start -->
              <header class="slds-modal__header">
                  <h2 class="slds-text-heading_small">New SR Rejection: {complainLevel} Complaint</h2>
                  <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                      title="Close" onclick={hideRejModal}>
                      <lightning-icon icon-name="utility:close" alternative-text="close"
                          size="small"></lightning-icon>
                      <span class="slds-assistive-text">Close</span>
                  </button>
              </header>
              <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-2"
                  style="position: relative;">
                  <div class="slds-p-left_large"><b>Note:</b> {RejMsg}</div>
                  <template if:true={showLoading}>
                      <lightning-spinner alternative-text="Loading" size="medium"
                          class="spinnerClass"></lightning-spinner>
                  </template>
                  <lightning-card>
                      <lightning-record-edit-form object-api-name={objectApiName} data-id="rejectionEditForm"
                          onsuccess={handleSuccessRejection} onsubmit={onRejSubmit} onerror={showHideSpinner}
                          record-type-id={rejectionRTId}>
                          <lightning-messages></lightning-messages>
                          <div class="slds-m-around_medium">
                              <lightning-input-field field-name="Service_Request__c" value={ServiceRequestId}
                                  style="display:none"></lightning-input-field>
                              <lightning-input-field field-name="Active__c" value={isActive}
                                  style="display:none"></lightning-input-field>
                              <lightning-input-field field-name="Is_WBG__c" value={isWbg}
                                  style="display:none"></lightning-input-field>
                              <lightning-input-field field-name="Stage__c" value={draftStage}
                                  style="display:none"></lightning-input-field>
                              <lightning-input-field style="margin-bottom: -5px;" class="RejectionInput" required
                                  field-name="Manager__c" value={ManagerId}></lightning-input-field>
                              <div class="slds-grid slds-gutters">
                                  <div class="slds-col slds-size_1-of-3 custom-Padding-Label">
                                      <span><label lightning-combobox_combobox="" class="slds-form-element__label"
                                              for="combobox-button-649">
                                              <abbr lightning-combobox_combobox="" class="slds-required"
                                                  title="required">*</abbr>
                                              Rejection Reason
                                          </label>
                                      </span>
                                  </div>
                                  <div class="slds-col slds-size_2-of-3 custom-Padding-Input">
                                      <span><lightning-combobox class="RejectionInput" variant="label-hidden"
                                              value={selectedReason} options={reasonLOV} placeholder=''
                                              onchange={handleRejReasonChange} required>
                                          </lightning-combobox></span>
                                  </div>
                              </div>
                              <!--lightning-input-field class="slds-hidden" required field-name="Rejection_Reason__c"></lightning-input-field-->
                              <lightning-input-field class="RejectionInput" required
                                  field-name="Rejection_Details__c"></lightning-input-field>
                              <lightning-input-field class="RejectionInput" required
                                  field-name="Rejection_Type__c"></lightning-input-field>

                              <!--div class="slds-m-top_medium">
                         
                      </div-->
                              <div class="slds-align_absolute-center custom-footer">
                                  <lightning-button label="Cancel" title="Non-primary action2"
                                      class="slds-m-around_xxx-small" onclick={hideRejModal}></lightning-button>
                                  <lightning-button variant="brand" type="submit" name="save" label="Save"
                                      onclick={showHideSpinner}></lightning-button>
                              </div>
                          </div>
                      </lightning-record-edit-form>
                  </lightning-card>
              </div>
          </div>
      </section>
      <div class="slds-backdrop slds-backdrop_open"></div>
  </template>
  <!--End: Complain SR Rejection Create Modal-->

  <!-- Start Hidden Integration Panel -->
  <!--<lightning-button variant="brand" name="test" label="Test" onclick={invokeIntegrations}></lightning-button>-->
  <!--<c-asf_-integrations-prepopulate case-id={recordId} onprepopulate={prepopulateResponseReceived}></c-asf_-integrations-prepopulate>-->
  <!-- <c-test-child-comp ></c-test-child-comp> -->
  <!-- End Hidden Integration Panel -->
</template>